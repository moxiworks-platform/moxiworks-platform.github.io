<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="/stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="/javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="partials partials_oauth_authentication partials_oauth_authentication_profile">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="/images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="/images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h3 id="obtaining-end-user-profiles">Obtaining End User Profiles</h3>

<p>An access token can be used to get information about an end user.</p>

<aside class="note">Send a <b>GET</b> request to https://sso.moxiworks.com/agent/profile</aside>

<p>The request is gated by the presence of an OAuth 2 access token.</p>

<p>To send the access token in the request, add an <code class="prettyprint">Authorization</code> HTTP header with a value of <code class="prettyprint">Bearer &lt;access_token&gt;</code>.</p>

<p>If the access token has expired or is otherwise invalid, the server responds with a <code class="prettyprint">401 Unauthorized</code> status and the <code class="prettyprint">WWW-Authenticate</code> header specifying <code class="prettyprint">error=&quot;invalid_token&quot;</code>.</p>

<p>If the access token is valid, but the user isn&rsquo;t authorized to authenticate with the client, the server responds with a <code class="prettyprint">401 Unauthorized</code> status and the <code class="prettyprint">WWW-Authenticate</code> header specifying <code class="prettyprint">error=&quot;user_not_authorized&quot;</code>.</p>

<p>If the access token was valid, a JSON object is returned:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Remark</th>
</tr>
</thead><tbody>
<tr>
<td><span class="required-data">display_name</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">The end user&rsquo;s display name</span></td>
</tr>
<tr>
<td><span class="required-data">username</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">A unique (mutable) identifier for the end user</span></td>
</tr>
<tr>
<td><span class="required-data">user_id</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">A unique (immutable) identifier for the end user</span></td>
</tr>
<tr>
<td><span class="required-data">email</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">The end user&rsquo;s email address</span></td>
</tr>
<tr>
<td><span class="required-data">company_name</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">The name of the company the end user works at</span></td>
</tr>
<tr>
<td><span class="required-data">external_id</span></td>
<td><span class="data-type">String</span></td>
<td><span class="data-remarks">A unique identifier for the end user provided by the user&rsquo;s company</span></td>
</tr>
</tbody></table>

<p>More fields may be added to this in the future.
Consumers of this data should not fail if more fields are present in the result.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
