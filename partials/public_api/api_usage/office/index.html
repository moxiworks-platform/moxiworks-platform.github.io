<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="partials partials_public_api partials_public_api_api_usage partials_public_api_api_usage_office partials_public_api_api_usage_office_index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../../../../images/logo.png" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h4 id="office-index"><span class='entity-name'>Office</span> <span class='action-name'>Index</span></h4>

<div class='highlight ruby'><blockquote><span class='data-example-label'><a href='http://moxiworks-platform.github.io/moxiworks-ruby/MoxiworksPlatform/Office.html#search-class_method'>Ruby Search Docs</a></span></blockquote></div>

<div class='highlight php'><blockquote><span class='data-example-label'><a href='http://moxiworks-platform.github.io/moxiworks-php/classes/MoxiworksPlatform.Office.html#method_search'>PHP Search Docs</a></span></blockquote></div>

<blockquote>
<p><span class="data-example-label"><span class='entity-name'>Office</span> <span class='action-name'>Index</span> Example</span></p>
</blockquote>

<div class='highlight csharp'><blockquote><span class='data-example-label'><a href='https://moxiworks-platform.github.io/moxiworks-dotnet/class_moxi_works_1_1_platform_1_1_office_service.html#a419c26b18ea70a208d17de79b6009901'>.Net <span class='action-name'>OfficeService.GetCompanyOfficesAsync</span> Docs</a></span></blockquote></div>

<blockquote>
<p>First page of all <span class='entity-name'>Office</span> objects for specified <span class='entity-name'>Company</span></p>
</blockquote>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/offices?moxi_works_company_id=abc123</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.moxiworks.com</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.moxi-platform+json;version=1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic XNNeXAAAUZaQlF0dA==</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"moxi_works_company_id"</span><span class="p">:</span><span class="s2">"the_company"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<pre class="highlight csharp"><code>
<span class="cm">/* set up prerequisites once */</span>
<span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">"Secret"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"secret"</span><span class="p">;</span>
<span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">"Identifier"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"abc123"</span><span class="p">;</span>

<span class="n">var</span> <span class="n">moxiWorksCompanyId</span> <span class="p">=</span> <span class="s">"abc123"</span><span class="p">;</span>

<span class="n">var</span> <span class="n">service</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OfficeService</span><span class="p">(</span><span class="k">new</span> <span class="nf">MoxiWorksClient</span><span class="p">());</span>
<span class="n">var</span> <span class="n">results</span> <span class="p">=</span> <span class="n">service</span><span class="p">.</span><span class="nf">GetCompanyOfficesAsync</span><span class="p">(</span> <span class="n">moxiWorksCompanyId</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="c1">##### set up prerequisites once</span>
<span class="nb">require</span> <span class="s1">'moxiworks_platform'</span>

<span class="n">platform_identifier</span> <span class="o">=</span> <span class="s1">'abc123'</span>

<span class="n">platform_secret</span> <span class="o">=</span> <span class="s1">'secret'</span>

<span class="no">MoxiworksPlatform</span><span class="o">::</span><span class="no">Credentials</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">platform_identifier</span><span class="p">,</span> <span class="n">platform_secret</span><span class="p">)</span>
<span class="c1">##### end prerequisites</span>

<span class="n">company_offices</span> <span class="o">=</span> <span class="no">MoxiworksPlatform</span><span class="o">::</span><span class="no">Office</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">moxi_works_company_id: </span><span class="s2">"abc123"</span><span class="p">)</span>

</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$platform_identifier</span> <span class="o">=</span> <span class="s1">'abc123'</span><span class="p">;</span> <span class="c1">// platorm_identifier provided by Moxi Works Platform Rep
</span><span class="nv">$platform_secret</span> <span class="o">=</span> <span class="s1">'secret'</span><span class="p">;</span> <span class="c1">//platform_secret provided by Moxi Works Platform Rep
</span>
<span class="nv">$credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MoxiworksPlatform\Credentials</span><span class="p">(</span><span class="nv">$platform_identifier</span><span class="p">,</span> <span class="nv">$platform_secret</span><span class="p">);</span>

<span class="nv">$company_offices</span> <span class="o">=</span> <span class="nx">MoxiworksPlatform\Office</span><span class="o">::</span><span class="na">search</span><span class="p">([</span><span class="s1">'moxi_works_company_id'</span> <span class="o">=&gt;</span> <span class="s1">'abc123'</span><span class="p">]);</span>
<span class="cp">?&gt;</span>
</code></pre>

<blockquote>
<p>Second page of All <span class='entity-name'>Office</span> objects for a specified <span class='entity-name'>Company</span></p>
</blockquote>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/offices?moxi_works_company_id=abc123&amp;page_number=2</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.moxiworks.com</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.moxi-platform+json;version=1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic XNNeXAAAUZaQlF0dA==</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"moxi_works_company_id"</span><span class="p">:</span><span class="s2">"the_company"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"page_number"</span><span class="p">:</span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<pre class="highlight ruby"><code><span class="n">company_offices</span> <span class="o">=</span> <span class="no">MoxiworksPlatform</span><span class="o">::</span><span class="no">Office</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">moxi_works_company_id: </span><span class="s2">"abc123"</span><span class="p">,</span>  <span class="ss">page_number: </span><span class="mi">2</span><span class="p">)</span>

</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$company_offices</span> <span class="o">=</span> <span class="nx">MoxiworksPlatform\Office</span><span class="o">::</span><span class="na">search</span><span class="p">([</span><span class="s1">'moxi_works_company_id'</span> <span class="o">=&gt;</span> <span class="s1">'abc123'</span><span class="p">,</span>  <span class="s1">'page_number'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">]);</span>
<span class="cp">?&gt;</span>
</code></pre>

<h5 id="office-index-request-attributes"><span class='entity-name'>Office</span> <span class='action-name'>Index</span> Request Attributes</h5>

<aside class="note">Send a <b>GET</b> request to https://api.moxiworks.com/api/offices</aside>

<p>When searching for <span class='entity-name'>Office</span> entities using the Moxi Works platform API, format your data using the following parameters.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Length Limit</th>
</tr>
</thead><tbody>
<tr>
<td><span class="required-data">moxi_works_company_id</span></td>
<td><span class="required-data"><span class="data-type">String</span></span></td>
<td><span class="required-data">255<span></td>
</tr>
<tr>
<td><span class="optional-data">deactivated</span></td>
<td><span class="data-type">Boolean</span></td>
<td>255</td>
</tr>
<tr>
<td><span class="optional-data">page_number</span></td>
<td><span class="data-type">Integer</span></td>
<td>255</td>
</tr>
<tr>
<td><span class="optional-data">deactivated_since</span></td>
<td><span class="data-type">Integer</span></td>
<td>255</td>
</tr>
</tbody></table>

<p><span class="required-data"><strong>Required Parameters Are In Red</strong></span></p>

<p><span class="request-data-head">moxi_works_company_id</span>
<span class="request-data-remarks">A valid Moxi Works <span class='entity-name'>Company</span> ID. Use <a href="#company">Company Endpoint</a> to determine what <span class='attribute-name'>moxi_works_company_id</span> you can use.</span></p>

<aside class="note">Use <a href='#company'>Company Endpoint</a> to determine the moxi_works_company_id to send.</aside>

<p><span class="request-data-head">deactivated</span>
<span class="request-data-remarks">To find offices deactivated within the specified timeframe, pass <code class="prettyprint">true</code> for this boolean parameter.</span></p>

<p><span class="request-data-head">page_number</span>
<span class="request-data-remarks">For queries with multi-page responses, use the <span class='attribute-name'>page_number</span> parameter to return data for specific pages. Data for page 1 is returned if this parameter is not included. Use this parameter if <strong>total_pages</strong> indicates that there is more than one page of data available.</span></p>

<p><span class="request-data-head">deactivated_since</span>
<span class="request-data-remarks">any <span class='entity-name'>Office</span> objects deactivated after this Unix timestamp will be returned in the response. <strong>If no <span class='attribute-name'>deactivated_since</span> parameter is included in the request, only <span class='entity-name'>Office</span> objects deactivated in the last seven days will be returned.</strong></span></p>

<aside class="note">By default only <span class='entity-name'>Office</span> objects deactivated in the last seven days will be returned.</aside>

<blockquote><div class='highlight json' style="display: block">
<span class="data-example-label">Office Index: Success Response</span>
</div></blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"page_number"</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_pages"</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="w">
  </span><span class="nt">"offices"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
    </span><span class="nt">"moxi_works_office_id"</span><span class="p">:</span><span class="s2">"feedface-dead-beef-aadf-baddeedc645"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client_office_id"</span><span class="p">:</span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"image_url"</span><span class="p">:</span><span class="s2">"http://the.office.image/image.png"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"Bob's Better Brokerage"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"common_name"</span><span class="p">:</span><span class="s2">"Bob's Salsburry Hill Branch"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"101 South Southerly Street"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address2"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"Townseville"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"county"</span><span class="p">:</span><span class="s2">"Ye Olde Countrie"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="s2">"UM"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"zip_code"</span><span class="p">:</span><span class="s2">"12123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alt_phone"</span><span class="p">:</span><span class="s2">"8185551212"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"office@bobsbetterbrokers.erp"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"facebook"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"google_plus"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="s2">"8185551213"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timezone"</span><span class="p">:</span><span class="s2">"Pacific Time (US &amp; Canada)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"twitter"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"office_website"</span><span class="p">:</span><span class="s2">"http://the.office.website"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"region"</span><span class="p">:</span><span class="s2">"WESTERN WASHINGTON"</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote><div class='highlight json' style="display: block">
<span class="data-example-label">Office Index: Failure Response</span>
</div> See <a href='#error-handling'>Error Handling</a> for details about individual error codes.</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="err">xxx</span><span class="p">,</span><span class="w">
  </span><span class="nt">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"messages"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p><span class='entity-name'>Office</span>  <span class='action-name'>Index</span> responses are divided into pages of  <span class='entity-name'>Office</span> objects. Use response payload attributes <span class='attribute-name'>total_pages</span> and <span class='attribute-name'>page_number</span> to determine how many pages of  <span class='entity-name'>Office</span> objects there are and whether additional pages need to be requested.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><span class="response-data">page_number</span></td>
<td><span class="data-type">Integer</span></td>
</tr>
<tr>
<td><span class="response-data">total_pages</span></td>
<td><span class="data-type">Integer</span></td>
</tr>
<tr>
<td><span class="response-data">offices</span></td>
<td><span class="data-type">Array</span></td>
</tr>
</tbody></table>

<h6 id="offices-object"><span class='attribute-name'>offices</span> Object</h6>

<p>The <span class='attribute-name'>offices</span> array contains Dictionary objects representing <span class='entity-name'>Office</span> entries. The structure of each <span class='entity-name'>Office</span> entry is shown below.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><span class="response-data">moxi_works_office_id</span></td>
<td><span class="data-type">String</span></td>
</tr>
<tr>
<td><span class="response-data">id</span></td>
<td><span class="data-type">String</span></td>
</tr>
<tr>
<td><span class="response-data">client_office_id</span></td>
<td><span class="data-type">String</span></td>
</tr>
<tr>
<td><span class="response-data">image_url</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">name</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">common_name</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">address</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">address2</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">city</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">county</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">state</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">zip_code</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">alt_phone</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">email</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">facebook</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">google_plus</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">phone</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">timezone</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">twitter</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">office_website</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">region</span></td>
<td><span class="data-type">String or null</span></td>
</tr>
<tr>
<td><span class="response-data">created_timestamp</span></td>
<td><span class="data-type">Integer</span></td>
</tr>
<tr>
<td><span class="response-data">deactivated_timestamp</span></td>
<td><span class="data-type">Integer or null</span></td>
</tr>
</tbody></table>

<p><span class="response-data-head">moxi_works_office_id</span>
<span class="response-data-remarks">This is the Moxi Works Platform ID of the office for this <span class='entity-name'>Office</span>. This will be an <a href="https://tools.ietf.org/html/rfc4122">RFC 4122</a> compliant UUID.</span></p>

<p><span class="response-data-head">id</span>
<span class="response-data-remarks">An alternate integer ID of the office. If you are integrating with Moxi Works Authentication services, you should use this ID.</span></p>

<p><span class="response-data-head">client_office_id</span>
<span class="response-data-remarks">This is the  ID of the office utilized by the company.</span></p>

<p><span class="response-data-head">image_url</span>
<span class="response-data-remarks">URL to an image of the office. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">name</span>
<span class="response-data-remarks">The legal name of the office. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">common_name</span>
<span class="response-data-remarks">The commonly known name of the office. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">address</span>
<span class="response-data-remarks">The street address of the office. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">address2</span>
<span class="response-data-remarks">The suite or office number of the office. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">city</span>
<span class="response-data-remarks">The city the office is in. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">county</span>
<span class="response-data-remarks">The county the office is in. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">state</span>
<span class="response-data-remarks">The state or provice the office is in. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">zip_code</span>
<span class="response-data-remarks">The postal code the office is in. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">alt_phone</span>
<span class="response-data-remarks">Alternate phone number for the office. This should be considered second in priority to <span class='attribute-name'>phone_number</span>.  This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">email</span>
<span class="response-data-remarks">This is the office&rsquo;s main email address. This email address should be considered the email address the office would prefer to be contacted by.  This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">facebook</span>
<span class="response-data-remarks">Office&rsquo;s Facebook page url.  This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">google_plus</span>
<span class="response-data-remarks">Office&rsquo;s Google Plus account name.  This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">phone_number</span>
<span class="response-data-remarks">This is the office&rsquo;s main phone number.  This number should be considered the number the office would prefer to be contacted by. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">timezone</span>
<span class="response-data-remarks">Timezone the office is in.</span></p>

<p><span class="response-data-head">twitter</span>
<span class="response-data-remarks">Office&rsquo;s Twitter account name. This can be null if there is no data available for this attribute.</span></p>

<p><span class="response-data-head">office_website</span>
<span class="response-data-remarks">Office&rsquo;s website URL. This can be null if there is no data available for this attribute.</span></p>

<p><span class="response-data-head">region</span>
<span class="response-data-remarks">The region the agent&rsquo;s office is in. This can be null if there is no data for this attribute.</span></p>

<p><span class="response-data-head">created_timestamp</span>
<span class="response-data-remarks">This is the Unix timestamp representing the date that this <span class='entity-name'>Office</span> was created in the MoxiWorks system.</span></p>

<p><span class="response-data-head">deactivated_timestamp</span>
<span class="response-data-remarks">This is the Unix timestamp representing the date that this <span class='entity-name'>Office</span> was deactivated in the MoxiWorks system. This will be returned null if the office is still active.</span></p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
